{"cve": {"id": "CVE-2026-23163", "sourceIdentifier": "416baaa9-dc9f-4396-8d5f-8c081fb06d67", "published": "2026-02-14T16:15:56.483", "lastModified": "2026-02-18T17:52:44.520", "vulnStatus": "Awaiting Analysis", "cveTags": [], "descriptions": [{"lang": "en", "value": "In the Linux kernel, the following vulnerability has been resolved:\n\ndrm/amdgpu: fix NULL pointer dereference in amdgpu_gmc_filter_faults_remove\n\nOn APUs such as Raven and Renoir (GC 9.1.0, 9.2.2, 9.3.0), the ih1 and\nih2 interrupt ring buffers are not initialized. This is by design, as\nthese secondary IH rings are only available on discrete GPUs. See\nvega10_ih_sw_init() which explicitly skips ih1/ih2 initialization when\nAMD_IS_APU is set.\n\nHowever, amdgpu_gmc_filter_faults_remove() unconditionally uses ih1 to\nget the timestamp of the last interrupt entry. When retry faults are\nenabled on APUs (noretry=0), this function is called from the SVM page\nfault recovery path, resulting in a NULL pointer dereference when\namdgpu_ih_decode_iv_ts_helper() attempts to access ih->ring[].\n\nThe crash manifests as:\n\n  BUG: kernel NULL pointer dereference, address: 0000000000000004\n  RIP: 0010:amdgpu_ih_decode_iv_ts_helper+0x22/0x40 [amdgpu]\n  Call Trace:\n   amdgpu_gmc_filter_faults_remove+0x60/0x130 [amdgpu]\n   svm_range_restore_pages+0xae5/0x11c0 [amdgpu]\n   amdgpu_vm_handle_fault+0xc8/0x340 [amdgpu]\n   gmc_v9_0_process_interrupt+0x191/0x220 [amdgpu]\n   amdgpu_irq_dispatch+0xed/0x2c0 [amdgpu]\n   amdgpu_ih_process+0x84/0x100 [amdgpu]\n\nThis issue was exposed by commit 1446226d32a4 (\"drm/amdgpu: Remove GC HW\nIP 9.3.0 from noretry=1\") which changed the default for Renoir APU from\nnoretry=1 to noretry=0, enabling retry fault handling and thus\nexercising the buggy code path.\n\nFix this by adding a check for ih1.ring_size before attempting to use\nit. Also restore the soft_ih support from commit dd299441654f (\"drm/amdgpu:\nRework retry fault removal\").  This is needed if the hardware doesn't\nsupport secondary HW IH rings.\n\nv2: additional updates (Alex)\n\n(cherry picked from commit 6ce8d536c80aa1f059e82184f0d1994436b1d526)"}, {"lang": "es", "value": "En el kernel de Linux, la siguiente vulnerabilidad ha sido resuelta:\n\ndrm/amdgpu: corrige la desreferenciaci\u00f3n de puntero NULL en amdgpu_gmc_filter_faults_remove\n\nEn APUs como Raven y Renoir (GC 9.1.0, 9.2.2, 9.3.0), los b\u00faferes de anillo de interrupci\u00f3n ih1 e ih2 no est\u00e1n inicializados. Esto es intencional, ya que estos anillos IH secundarios solo est\u00e1n disponibles en GPUs discretas. V\u00e9ase vega10_ih_sw_init() que expl\u00edcitamente omite la inicializaci\u00f3n de ih1/ih2 cuando AMD_IS_APU est\u00e1 configurado.\n\nSin embargo, amdgpu_gmc_filter_faults_remove() usa incondicionalmente ih1 para obtener la marca de tiempo de la \u00faltima entrada de interrupci\u00f3n. Cuando las fallas de reintento est\u00e1n habilitadas en APUs (noretry=0), esta funci\u00f3n es llamada desde la ruta de recuperaci\u00f3n de fallas de p\u00e1gina SVM, lo que resulta en una desreferenciaci\u00f3n de puntero NULL cuando amdgpu_ih_decode_iv_ts_helper() intenta acceder a ih-&gt;ring[].\n\nEl fallo se manifiesta como:\n\n  BUG: desreferenciaci\u00f3n de puntero NULL del kernel, direcci\u00f3n: 0000000000000004\n  RIP: 0010:amdgpu_ih_decode_iv_ts_helper+0x22/0x40 [amdgpu]\n  Call Trace:\n   amdgpu_gmc_filter_faults_remove+0x60/0x130 [amdgpu]\n   svm_range_restore_pages+0xae5/0x11c0 [amdgpu]\n   amdgpu_vm_handle_fault+0xc8/0x340 [amdgpu]\n   gmc_v9_0_process_interrupt+0x191/0x220 [amdgpu]\n   amdgpu_irq_dispatch+0xed/0x2c0 [amdgpu]\n   amdgpu_ih_process+0x84/0x100 [amdgpu]\n\nEste problema fue expuesto por el commit 1446226d32a4 ('drm/amdgpu: Eliminar GC HW IP 9.3.0 de noretry=1') que cambi\u00f3 el valor predeterminado para la APU Renoir de noretry=1 a noretry=0, habilitando el manejo de fallas de reintento y, por lo tanto, ejercitando la ruta de c\u00f3digo defectuosa.\n\nSolucione esto a\u00f1adiendo una comprobaci\u00f3n para ih1.ring_size antes de intentar usarlo. Tambi\u00e9n restaure el soporte soft_ih del commit dd299441654f ('drm/amdgpu: Reestructurar la eliminaci\u00f3n de fallas de reintento'). Esto es necesario si el hardware no soporta anillos IH de hardware secundarios.\n\nv2: actualizaciones adicionales (Alex)\n\n(seleccionado de commit 6ce8d536c80aa1f059e82184f0d1994436b1d526)"}], "metrics": {}, "references": [{"url": "https://git.kernel.org/stable/c/7611d7faccc1218be477671f892a89b25c0cb352", "source": "416baaa9-dc9f-4396-8d5f-8c081fb06d67"}, {"url": "https://git.kernel.org/stable/c/8b1ecc9377bc641533cd9e76dfa3aee3cd04a007", "source": "416baaa9-dc9f-4396-8d5f-8c081fb06d67"}, {"url": "https://git.kernel.org/stable/c/ac251d17d8af58ddc3daba65eaf0a99e63dc4284", "source": "416baaa9-dc9f-4396-8d5f-8c081fb06d67"}, {"url": "https://git.kernel.org/stable/c/c74e2dbb5316898fb2113a8ea3a93b27698dbf68", "source": "416baaa9-dc9f-4396-8d5f-8c081fb06d67"}]}}